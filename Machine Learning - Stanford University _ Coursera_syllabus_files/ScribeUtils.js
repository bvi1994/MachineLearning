define("bundles/cml/utils/ScribeUtils",["require","exports","module","jquery","underscore","scribe","bundles/cml/constants/CMLEditorPlugins"],function(require,exports,module){"use strict";var $=require("jquery"),_=require("underscore"),n=require("scribe"),e=require("bundles/cml/constants/CMLEditorPlugins"),s={createInstance:function createInstance(s){var l=s.el,f=s.blocks,g=s.placeholder,o=s.editorContainer,c=s.disabledPlugins,u=s.showToolbarByDefault,a=s.toolbarContainer,d=s.assetAdminOptions,b=s.imageUploadOptions,m=s.codeBlockOptions,p=s.onContentChange,r=new n(l,{allowBlockElements:!0}),i={p:{},strike:{},sub:{},sup:{},audio:{controls:!0},source:{src:!0},pre:{},div:{}},t=_(c).indexBy("id");return r.on("content-changed",p),f.forEach(function(e){if(e.plugin){var n=null;switch(e.commandName){case"imageUpload":n=b;break;case"code":n={editorContainer:o,codeBlockOptions:m};break;case"asset":n=d}r.use(e.plugin(n))}e.tags&&e.tags.forEach(function(e){return i[e.name]=e.value||{}})}),_(e).each(function(n){if(!_(t).has(n.id))switch(n.id){case e.Placeholder.id:o&&r.use(n.run(g,o));break;case e.Toolbar.id:a&&r.use(n.run(a));break;case e.ToolbarVisibility.id:o&&a&&r.use(n.run(o,a,u));break;case e.Sanitizer.id:r.use(n.run({tags:i}));break;default:r.use(n.run())}}),r},destroyInstance:function destroyInstance(e){$(".scribe-marker").remove()}};module.exports=s});