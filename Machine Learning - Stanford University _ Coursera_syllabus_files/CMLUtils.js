define("bundles/cml/utils/CMLUtils",["require","exports","module","underscore","bundles/cml/models/CMLParser"],function(require,exports,module){"use strict";var _=require("underscore"),e=require("bundles/cml/models/CMLParser"),t=e.BLOCK_TYPES,r=e.SUPPORTED_BLOCKS,n={create:function create(n,t){return{typeName:"cml",definition:{dtdId:t||"",value:n||e.EMPTY_CML}}},getDtdId:function getDtdId(e){return e.definition.dtdId},getValue:function getValue(e){return e.definition.value},getInnerText:function getInnerText(t){var r=n.getValue(t),i=new e(r);return e.getInnerText(i.getRoot())},isEmpty:function isEmpty(i){var u=n.getValue(i),o=new e(u),r=o.getBlocks(),l=t.Image,c=t.Audio,a=t.Asset,d=[l,c,a];if(0===r.length)return!0;var s=_(r).find(function(n){var t=e.getBlockType(n),r=e.getInnerText(n);return""!==r||-1!==d.indexOf(t)});return void 0===s},getLength:function getLength(e){return n.getInnerText(e).length},isCML:function isCML(e){return void 0!==e.typeName},replaceVariable:function replaceVariable(n,t,r){var e=Object.assign({},n);return e.definition.value=e.definition.value.replace("%"+t+"%",r),e},getUnsupportedBlocks:function getUnsupportedBlocks(t){var i=n.getValue(t),u=new e(i),o=u.getBlocks();return _(o).filter(function(n){var t=e.getBlockType(n);return!_(r).contains(t)})}};module.exports=n});