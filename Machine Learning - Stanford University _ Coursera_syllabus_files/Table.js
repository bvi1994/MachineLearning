define("bundles/cml/models/HTMLToCMLConverter/Table",["require","exports","module","underscore","./Element","./InlineElement","bundles/cml/models/CMLParser"],function(require,exports,module){"use strict";function _defaults(e,r){for(var c=Object.getOwnPropertyNames(r),t=0;t<c.length;t++){var n=c[t],o=Object.getOwnPropertyDescriptor(r,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):_defaults(t,e))}var _=require("underscore"),e=require("./Element"),t=require("./InlineElement"),n=require("bundles/cml/models/CMLParser"),o=function(e){function TableCellHeader(r,c){_classCallCheck(this,TableCellHeader);var n=_possibleConstructorReturn(this,e.call(this,r,c,"th","th")),o=n.doc.createElement("text");return _(n.childNodes).each(function(e){var r=new t(n.doc,e);o.appendChild(r.block)}),n.block.appendChild(o),n}return _inherits(TableCellHeader,e),TableCellHeader}(e),r=function(e){function TableCell(c,i){_classCallCheck(this,TableCell);var o=_possibleConstructorReturn(this,e.call(this,c,i,"td","td")),r=o.doc.createElement("text");return _(o.childNodes).each(function(e){var n=new t(o.doc,e);r.appendChild(n.block)}),n.hasMath(r)&&r.setAttribute("hasMath",!0),o.block.appendChild(r),o}return _inherits(TableCell,e),TableCell}(e),c=function(e){function TableRow(n,c){_classCallCheck(this,TableRow);var t=_possibleConstructorReturn(this,e.call(this,n,c,"tr","tr"));return _(t.childNodes).each(function(e){var c=e.tagName.toLowerCase(),n=void 0;n="th"===c?new o(t.doc,e):new r(t.doc,e),t.block.appendChild(n.block)}),t}return _inherits(TableRow,e),TableRow}(e),i=function(e){function Table(r,i){_classCallCheck(this,Table);var t=_possibleConstructorReturn(this,e.call(this,r,i,"table","table"));if(t.childNodes.length>1||"tbody"!==t.childNodes[0].tagName.toLowerCase())throw new Error("Missing or invalid <tbody> for table");var l=t.childNodes[0],n=l.childNodes;_(n).each(function(e){var n=new c(t.doc,e);t.block.appendChild(n.block)});var a=n.length,o=0;return n[0]&&(o=n[0].childNodes.length),t.setBlockAttribute("rows",a),t.setBlockAttribute("columns",o),t}return _inherits(Table,e),Table}(e);module.exports=i});